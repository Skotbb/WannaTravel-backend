{"version":3,"sources":["../../../public/javascripts/utils.js"],"names":["getTravelDates","getDate","getUrl","updateFlightUrl","moment","require","formatString","dayOfWeek","duration","now","dateOfDay","dur","day","parseInt","e","console","error","add","dep","format","ret","dateString","date","toDate","url","includes","split1","substring","indexOf","split2","split3","length","newUrl"],"mappings":";;;;;QAagBA,c,GAAAA,c;QAuBAC,O,GAAAA,O;QAeAC,M,GAAAA,M;QAGAC,e,GAAAA,e;;AArDhB;;;;;;AADA,IAAMC,SAASC,QAAQ,QAAR,CAAf;;;AAIC;AACD,IAAIC,eAAe,YAAnB;;AAEA;;;;;;AAMO,SAASN,cAAT,CAAwBO,SAAxB,EAAmCC,QAAnC,EAA6C;AACnD,KAAIC,MAAML,QAAV;AACA,KAAIM,kBAAJ;AACA,KAAIC,YAAJ;AACA,KAAIJ,aAAaC,QAAjB,EAA2B;AAC1BE,cAAYN,SAASQ,GAAT,CAAaL,SAAb,CAAZ;AACA;AACA;AACA,MAAI;AACHI,SAAME,SAASL,QAAT,CAAN;AACA,GAFD,CAEE,OAAOM,CAAP,EAAU;AACXC,WAAQC,KAAR,CAAcF,CAAd;AACA;AACD,EATD,MASO;AACNJ,cAAYN,QAAZ;AACAO,QAAM,CAAN;AACA;;AAEDD,WAAUO,GAAV,CAAc,CAAd,EAAiB,QAAjB;AACA;AACA,QAAO,EAACC,KAAKR,UAAUS,MAAV,CAAiBb,YAAjB,CAAN,EAAsCc,KAAIV,UAAUO,GAAV,CAAcN,GAAd,EAAmB,MAAnB,EAA2BQ,MAA3B,CAAkCb,YAAlC,CAA1C,EAAP;AACA;;AAEM,SAASL,OAAT,CAAiBoB,UAAjB,EAA6B;AACnC,KAAGA,UAAH,EAAe;AACd;AACA,MAAI;AACH,OAAIC,OAAOlB,OAAOiB,UAAP,EAAmBf,YAAnB,CAAX;;AAEA,UAAOgB,KAAKC,MAAL,EAAP;AACA,GAJD,CAIE,OAAOT,CAAP,EAAU;AACX,SAAMA,CAAN;AACA;AACD,EATD,MASO;AACN,SAAOV,SAASmB,MAAT,EAAP;AACA;AACD;;AAEM,SAASrB,MAAT,CAAgBgB,GAAhB,EAAqBE,GAArB,EAA0B;AAChC,QAAO,2HAA0HF,GAA1H,GAA+H,QAA/H,GAAyIE,GAAzI,GAA8I,gCAArJ;AACA;AACM,SAASjB,eAAT,CAAyBqB,GAAzB,EAA8BN,GAA9B,EAAmCE,GAAnC,EAAwC;AAC9C,KAAGI,IAAIC,QAAJ,CAAa,OAAb,KAAyBD,IAAIC,QAAJ,CAAa,OAAb,CAA5B,EAAmD;AAClD,MAAIC,SAASF,IAAIG,SAAJ,CAAc,CAAd,EAAiBH,IAAII,OAAJ,CAAY,OAAZ,IAAqB,CAAtC,CAAb;AACA,MAAIC,SAASL,IAAIG,SAAJ,CAAcH,IAAII,OAAJ,CAAY,GAAZ,EAAiBJ,IAAII,OAAJ,CAAY,OAAZ,CAAjB,CAAd,EAAsDJ,IAAII,OAAJ,CAAY,OAAZ,IAAqB,CAA3E,CAAb;AACA,MAAIE,SAASN,IAAIG,SAAJ,CAAcH,IAAII,OAAJ,CAAY,GAAZ,EAAiBJ,IAAII,OAAJ,CAAY,OAAZ,CAAjB,CAAd,EAAsDJ,IAAIO,MAA1D,CAAb;;AAEA,MAAIC,SAASN,SAASR,GAAT,GAAeW,MAAf,GAAwBT,GAAxB,GAA8BU,MAA3C;AACA;AACA,SAAOE,MAAP;AACA;AACD","file":"utils.js","sourcesContent":["const moment = require('moment')\r\nimport _ from 'lodash'\r\n\r\n\r\n\t//Utility Globals\r\nlet formatString = \"DD-MM-YYYY\"\r\n\r\n/**\r\n *\r\n * @param dayOfWeek The numerical day of the week, with 0 as Sunday.\r\n * @param duration The length of the trip, in days.\r\n * @returns {{dep: string, ret: string}}\r\n */\r\nexport function getTravelDates(dayOfWeek, duration) {\r\n\tlet now = moment();\r\n\tlet dateOfDay\r\n\tlet dur\r\n\tif (dayOfWeek && duration) {\r\n\t\tdateOfDay = moment().day(dayOfWeek)\r\n\t\t// console.log(dateOfDay.day() +\" / \"+ now.day())\r\n\t\t// console.log(dateOfDay.format(formatString))\r\n\t\ttry {\r\n\t\t\tdur = parseInt(duration)\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e)\r\n\t\t}\r\n\t} else {\r\n\t\tdateOfDay = moment()\r\n\t\tdur = 5\r\n\t}\r\n\r\n\tdateOfDay.add(1, \"months\")\r\n\t// console.log(now.format(formatString))\r\n\treturn {dep: dateOfDay.format(formatString), ret:dateOfDay.add(dur, 'days').format(formatString)}\r\n}\r\n\r\nexport function getDate(dateString) {\r\n\tif(dateString) {\r\n\t\t// console.log(dateString)\r\n\t\ttry {\r\n\t\t\tlet date = moment(dateString, formatString)\r\n\r\n\t\t\treturn date.toDate()\r\n\t\t} catch (e) {\r\n\t\t\tthrow e\r\n\t\t}\r\n\t} else {\r\n\t\treturn moment().toDate()\r\n\t}\r\n}\r\n\r\nexport function getUrl(dep, ret) {\r\n\treturn \"http://www.momondo.com/flights/mco-1/any-6/flights-from-orlando-intl-to-take-me-anywhere.html?TripType=2&SegNo=2&SDP0=\" +dep+ \"&SDP1=\" +ret+ \"&AD=1&TK=ECO&DO=false&NA=false\"\r\n}\r\nexport function updateFlightUrl(url, dep, ret) {\r\n\tif(url.includes('SDP0=') && url.includes('SDP1=')) {\r\n\t\tlet split1 = url.substring(0, url.indexOf('SDP0=')+5)\r\n\t\tlet split2 = url.substring(url.indexOf('&', url.indexOf('SDP0=')), url.indexOf('SDP1=')+5)\r\n\t\tlet split3 = url.substring(url.indexOf('&', url.indexOf('SDP1=')), url.length)\r\n\r\n\t\tlet newUrl = split1 + dep + split2 + ret + split3\r\n\t\t// console.log(newUrl)\r\n\t\treturn newUrl\r\n\t}\r\n}"]}